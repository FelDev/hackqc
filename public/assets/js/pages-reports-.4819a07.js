(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{386:function(t,e,i){"use strict";i.r(e);i(12);var o=i(2),n=i(387),a=i.n(n),s=i(105),r={name:"GoogleMap",components:{GmapCluster:a.a},computed:{google:s.gmapApi},props:{minDate:null,maxDate:null,donnee:{type:Array,default:function(){return{}}}},data:function(){return{center:{lat:45.508,lng:-73.587},markers:[],places:[],currentPlace:null}},mounted:function(){var t=this;this.geolocate(),this.$watch(function(){return t.google?t.donnee:[]},function(e){if(!Object(o.isEmpty)(e)){var i=new t.google.maps.LatLngBounds;t.markers=e.filter(function(e){return e.date>=new Date(t.minDate)&&e.date<=new Date(t.maxDate)}),t.markers.forEach(function(e){i.extend(new t.google.maps.LatLng(e.position.lat,e.position.lng))}),t.$refs.mapRef.$mapPromise.then(function(t){t.fitBounds(i)})}},{immediate:!0})},methods:{selectMarker:function(t){console.log(t)},setPlace:function(t){this.currentPlace=t},addMarker:function(){if(this.currentPlace){var t={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:t}),this.places.push(this.currentPlace),this.center=t,this.currentPlace=null}},geolocate:function(){var t=this;navigator.geolocation.getCurrentPosition(function(e){t.center={lat:e.coords.latitude,lng:e.coords.longitude}})}}},l=i(3),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("gmap-map",{ref:"mapRef",staticStyle:{width:"100%",height:"400px"},attrs:{center:t.center,zoom:12}},[i("gmap-cluster",t._l(t.markers,function(e,o){return i("gmap-marker",{key:o,attrs:{position:e.position},on:{click:function(i){return t.selectMarker(e)}}})}),1)],1)],1)},[],!1,null,null,null);e.default=c.exports},393:function(t,e,i){"use strict";i.r(e);var o=i(388),n=i(1),a=i.n(n),s={name:"sectionReport",components:{Datepicker:o.a},props:{},data:function(){return{report:{categorie:{},espece:"",date:a()().format("L"),criticite:1,description:"",position:{lat:"",lng:""},infoCitoyen:{email:"",emailConf:"",nom:"",telephone:""}},sent:!1,fileSubmitted:!1,filePreviews:[],center:{lat:45.508,lng:-73.587},useCustomLocation:!1,hasSetLocation:!1,suivit:"oui"}},mounted:function(){},methods:{submit:function(){this.sent=!0,console.log(this.report);var t=JSON.parse(localStorage.getItem("addedPositions"))||[];t.push({category:this.report.categorie,date:new Date,lat:this.report.position.lat,lng:this.report.position.lng}),localStorage.setItem("addedPositions",JSON.stringify(t))},photoSubmitted:function(){this.fileSubmitted=!0},setLocation:function(t){var e=this;navigator.geolocation.getCurrentPosition(function(t){e.center={lat:t.coords.latitude,lng:t.coords.longitude},e.report.position.lat=t.coords.latitude,e.report.position.lng=t.coords.longitude,e.hasSetLocation=!0}),this.hasSetLocation=!0},addMarker:function(t){this.report.position.lat=t.latLng.lat(),this.report.position.lng=t.latLng.lng(),this.hasSetLocation=!0,console.log(this.report)}}},r=(i(413),i(414),i(3)),l=i(415),c=i.n(l),u=Object(r.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sectionReport"},[t.sent?t._e():i("h1",[t._v("Signaler")]),t._v(" "),i("hr"),t._v(" "),t.sent?t._e():i("div",{staticClass:"formContainer"},[i("div",{staticClass:"categorie"},[i("div",{staticClass:"subCatFlex"},[i("label",[t._v("Catégorie de l'incident")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.report.categorie,expression:"report.categorie"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.report,"categorie",e.target.multiple?i:i[0])}}},[i("option",{attrs:{disabled:"",selected:"",hidden:""}},[t._v("Faire un choix")]),t._v(" "),i("option",{domProps:{value:t.categorie="inondations"}},[t._v("Inondations")]),t._v(" "),i("option",{domProps:{value:t.categorie="crues"}},[t._v("crues")]),t._v(" "),i("option",{domProps:{value:t.categorie="pluies"}},[t._v("pluies")]),t._v(" "),i("option",{domProps:{value:t.categorie="insectes"}},[t._v("insectes")])])]),t._v(" "),i("transition",{attrs:{name:"expand"}},["insectes"===t.report.categorie?i("div",{staticClass:"subCatFlex",attrs:{transition:""}},[i("label",[t._v("Espèces")]),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.report.especes,expression:"report.especes"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.report,"especes",e.target.multiple?i:i[0])}}},[i("option",{domProps:{value:t.especes="punaises"}},[t._v("Punaises")]),t._v(" "),i("option",{domProps:{value:t.especes="frelons"}},[t._v("Frelons")])])]):t._e()])],1),t._v(" "),i("div",{staticClass:"date subCatFlex"},[i("label",[t._v("Date de l'incident")]),t._v(" "),i("datepicker",{attrs:{value:t.report.date,"input-class":"dateInput"}})],1),t._v(" "),i("div",{staticClass:"criticite subCatFlex"},[i("label",{attrs:{for:"myRange"}},[t._v("Sévérité")]),t._v(" "),i("div",{staticClass:"slidecontainer"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.report.criticite,expression:"report.criticite"}],staticClass:"slider",attrs:{type:"range",min:"1",max:"5",value:"3",id:"myRange",name:"myRange"},domProps:{value:t.report.criticite},on:{__r:function(e){return t.$set(t.report,"criticite",e.target.value)}}}),t._v(" "),i("p",[t._v(t._s(t.report.criticite))])])]),t._v(" "),i("div",{staticClass:"googlemaps subCat"},[i("label",[t._v("Position de l'incident")]),i("br"),t._v(" "),i("div",{staticClass:"btnWrapper"},[i("button",{staticClass:"btn",on:{click:function(e){return t.setLocation(!0)}}},[t._v("Utiliser votre position actuelle")])]),t._v(" "),i("gmap-map",{staticStyle:{width:"100%",height:"400px"},attrs:{center:t.center,zoom:12,options:{disableDefaultUI:!0},clickable:!0,draggable:!0},on:{click:t.addMarker}},[i("GmapMarker",{key:1,attrs:{position:t.report.position}})],1)],1),t._v(" "),i("div",{staticClass:"description subCat"},[i("label",{attrs:{for:"moreInfo"}},[t._v("Informations supplémentaires")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.report.description,expression:"report.description"}],staticClass:"funkyInput",attrs:{name:"moreInfo",type:"text"},domProps:{value:t.report.description},on:{input:function(e){e.target.composing||t.$set(t.report,"description",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"subCat"},[i("label",{attrs:{for:"myFile"}},[t._v("Ajouter un fichier (optionel)")]),t._v(" "),i("input",{staticClass:"funkyInput",attrs:{type:"file",name:"myFile"},on:{change:function(e){return t.photoSubmitted()}}}),t._v(" "),t.fileSubmitted?i("div",{staticClass:"fileConf"},[t._v("✅ Votre photo à été enregistré avec succès\n        ")]):t._e()]),t._v(" "),i("div",{staticClass:"suivitOrNot subCat"},[i("label",{attrs:{for:"suivit"}},[t._v("Je veux un suivi sur mon incident")]),t._v(" "),i("div",{attrs:{id:"suivitOptions"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.suivit,expression:"suivit"}],attrs:{type:"radio",id:"suivitOui",name:"suivit",value:"oui"},domProps:{checked:t._q(t.suivit,"oui")},on:{change:function(e){t.suivit="oui"}}}),t._v(" "),i("label",{attrs:{for:"suivitOui"}},[t._v("Oui svp!")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.suivit,expression:"suivit"}],attrs:{type:"radio",id:"suivitNon",name:"suivit",value:"non"},domProps:{checked:t._q(t.suivit,"non")},on:{change:function(e){t.suivit="non"}}}),t._v(" "),i("label",{attrs:{for:"suivitNon"}},[t._v("Non, merci.")])])]),t._v(" "),i("transition",{attrs:{name:"expand"}},["oui"==t.suivit?i("div",{staticClass:"suivit"},[i("div",{staticClass:"nom subCatFlex"},[i("label",{attrs:{for:"name"}},[t._v("Nom")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.report.infoCitoyen.nom,expression:"report.infoCitoyen.nom"}],staticClass:"funkyInput",attrs:{name:"name",type:"text"},domProps:{value:t.report.infoCitoyen.nom},on:{input:function(e){e.target.composing||t.$set(t.report.infoCitoyen,"nom",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"email subCatFlex"},[i("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.report.infoCitoyen.email,expression:"report.infoCitoyen.email"}],staticClass:"funkyInput",attrs:{name:"email",type:"text subCatFlex"},domProps:{value:t.report.infoCitoyen.email},on:{input:function(e){e.target.composing||t.$set(t.report.infoCitoyen,"email",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"emailconf subCatFlex"},[i("label",{attrs:{for:"emailConf"}},[t._v("Email (Confirmation)")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.report.infoCitoyen.emailConf,expression:"report.infoCitoyen.emailConf"}],staticClass:"funkyInput",attrs:{name:"emailConf",type:"text"},domProps:{value:t.report.infoCitoyen.emailConf},on:{input:function(e){e.target.composing||t.$set(t.report.infoCitoyen,"emailConf",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"telephone subCatFlex"},[i("label",{attrs:{for:"phone"}},[t._v("Telephone")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.report.infoCitoyen.telephone,expression:"report.infoCitoyen.telephone"}],staticClass:"funkyInput",attrs:{name:"phone",type:"text"},domProps:{value:t.report.infoCitoyen.telephone},on:{input:function(e){e.target.composing||t.$set(t.report.infoCitoyen,"telephone",e.target.value)}}})])]):t._e()])],1),t._v(" "),i("div",{staticClass:"btnWrapper subCat"},[t.sent?t._e():i("button",{staticClass:"btn",on:{click:function(e){return t.submit()}}},[t._v("Envoyer")])]),t._v(" "),t.sent?i("div",[t._v("Merci beaucoup de votre collaboration! Vos élus sont impatient de lire vos messages. En attendant vous pouvez aller\n      faire un tour sur le site de portail de données québec!\n      "),i("router-link",{staticClass:"logo",attrs:{to:{name:"home"}}},[i("div",{staticClass:"btnWrapper subCat"},[i("button",{staticClass:"btn"},[t._v("Retour au menu principal")])])])],1):t._e()])},[],!1,null,"ed6525fc",null);"function"==typeof c.a&&c()(u);e.default=u.exports},401:function(t,e,i){},402:function(t,e,i){},413:function(t,e,i){"use strict";var o=i(401);i.n(o).a},414:function(t,e,i){"use strict";var o=i(402);i.n(o).a},415:function(t,e){}}]);